@model Proyecto1_PAW.Models.AsignacionDocenteModel
@{
    ViewBag.Title = "Editar Asignación";
}

<style>
    body {
        font-family: Arial, sans-serif;
    }

    h2 {
        color: #004a99;
        margin-bottom: 20px;
    }

    div {
        max-width: 400px;
        padding: 10px 0;
    }

    label {
        display: block;
        margin-top: 12px;
        font-weight: bold;
    }

    select {
        width: 100%;
        padding: 6px 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        margin-top: 5px;
    }

    button {
        background-color: #004a99;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 4px;
        margin-top: 15px;
        cursor: pointer;
    }

        button:hover {
            background-color: #0066cc;
        }

    a {
        margin-left: 15px;
        color: #004a99;
        text-decoration: none;
    }

        a:hover {
            text-decoration: underline;
        }

    #mensaje {
        margin-top: 15px;
        font-weight: bold;
    }
</style>

<p>
    <a href="/Panel/Index">Volver al Panel</a>
</p>

<h2>Editar Asignación</h2>

<div>
    <label>Docente:</label>
    <select id="docenteId">
        @foreach (var d in ViewBag.Docentes)
        {
            <option value="@d.Value" @(d.Value == Model.DocenteId.ToString() ? "selected" : "")>@d.Text</option>
        }
    </select><br /><br />

    <label>Curso:</label>
    <select id="cursoId">
        @foreach (var c in ViewBag.Cursos)
        {
            <option value="@c.Value" @(c.Value == Model.CursoId.ToString() ? "selected" : "")>@c.Text</option>
        }
    </select><br /><br />

    <button id="btnGuardar">Guardar Cambios</button>
    <a href="/DocenteCurso/Index">Cancelar</a>
</div>

<p id="mensaje" style="color:red;"></p>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $("#btnGuardar").click(function () {
        $.ajax({
            url: "/DocenteCurso/Editar",
            type: "POST",
            data: {
                id: @Model.Id,
                docenteId: $("#docenteId").val(),
                cursoId: $("#cursoId").val()
            },
            success: function (resp) {
                alert(resp.message);
                if (resp.success)
                    window.location.href = "/DocenteCurso/Index";
            },
            error: function () {
                $("#mensaje").text("Error en el servidor.");
            }
        });
    });
</script>
